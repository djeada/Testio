{% extends 'base_page.html' %}

{% block additional_styles %}
<link rel="stylesheet" type="text/css" href="/static/styles/student.css">
<!-- CodeMirror for syntax highlighting - Note: For production use, consider hosting these files locally 
     or adding integrity attributes for security. CDN resources should include SRI (Subresource Integrity) checks. -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/dracula.min.css">
{% endblock %}

{% block body %}
<div class="student-container">
    <div class="page-header">
        <h1 class="page-title">ğŸ“ Student Workspace</h1>
        <p class="page-subtitle">Write your code, test it, and submit for review</p>
        <p class="keyboard-hints" style="font-size: 0.85rem; color: var(--color-accent); margin-top: 0.5rem;">
            <kbd>Ctrl</kbd>+<kbd>Enter</kbd> to run tests
        </p>
    </div>

    <div class="student-content">
        <!-- Left Panel: Code Editor and Problem Description -->
        <div class="editor-panel">
            <div class="panel-section">
                <label for="student-name" class="form-label">ğŸ‘¤ Your Name:</label>
                <input type="text" id="student-name" class="form-input" placeholder="Enter your name" autocomplete="name" aria-required="true" />
            </div>

            <div class="panel-section">
                <label for="problem-description" class="form-label">ğŸ“ Problem Description:</label>
                <textarea id="problem-description" class="form-textarea" 
                    placeholder="Describe the problem your code solves (e.g., 'Write a program that calculates the sum of two numbers')"
                    aria-describedby="problem-desc-help"></textarea>
                <small id="problem-desc-help" class="form-help" style="color: var(--color-accent); font-size: 0.8rem; margin-top: 0.25rem; display: block;">
                    Briefly explain what your program does
                </small>
            </div>

            <div class="panel-section">
                <label for="code-editor" class="form-label">ğŸ’» Your Code:</label>
                <div class="code-editor-wrapper">
                    <textarea id="code-editor" aria-label="Code editor"></textarea>
                </div>
            </div>

            <div class="button-group">
                <button id="test-code-btn" class="btn btn-secondary" aria-describedby="test-code-desc">
                    <span class="btn-icon">ğŸ§ª</span>
                    Test Code
                </button>
                <button id="submit-code-btn" class="btn btn-primary" aria-describedby="submit-code-desc">
                    <span class="btn-icon">ğŸ“¤</span>
                    Submit to Teacher
                </button>
            </div>
            <span id="test-code-desc" class="sr-only">Run your code against test cases</span>
            <span id="submit-code-desc" class="sr-only">Submit your code for teacher review</span>
        </div>

        <!-- Right Panel: Test Results and Feedback -->
        <div class="results-panel">
            <div class="panel-header">
                <h2 class="panel-title">ğŸ“Š Test Results & Feedback</h2>
            </div>
            
            <div id="feedback-area" class="feedback-area" role="region" aria-live="polite" aria-label="Test results">
                <div class="empty-state">
                    <span class="empty-icon">ğŸš€</span>
                    <p>Click "Test Code" to see your results here</p>
                </div>
            </div>

            <div id="submission-status" class="submission-status hidden" role="alert">
                <div class="status-message"></div>
            </div>
        </div>
    </div>
</div>

<!-- CodeMirror JavaScript - Note: For production use, consider hosting these files locally 
     or adding integrity attributes for security. The code includes fallback to plain textarea if CDN is blocked. -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/python/python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/clike/clike.min.js"></script>
<script src="/static/js/student.js"></script>
{% endblock %}
